by = c('displace_record','Beta4_SAP_SUP'),
how ='left')
df_percentile_beta4 <- merge(df_percentile_beta4,
percentile_95th_OLS,
by = c('displace_record','Beta4_SAP_SUP'),
how ='left')
head(df_percentile_beta4)
pdf("../figs/3_SAP_SUP_interactions.pdf", height=3.8,width=7.6)
#pdf("~/Dropbox/YelpBias/kristen_sandbox/final_paper_code/JITE_git_upload/Bias/code/b_PopeSydnor/1_MC_simulations/figs/3_SAP_SUP_interactions.pdf", height=4,width=8)
col0 = rgb(0,0,0,0.3)
col1 = rgb(0,0,0,0.5)
col2 = rgb(0,0,0,0.8)
layout(matrix(c(1,1,2,3), 2, 2, byrow = TRUE), widths = c(2,2), heights = c(0.2,1))
par(mar=c(0.5,3,0.5,1),mgp=c(1.5,0.5,0),tcl=-0.3)
plot(0,0, bty = 'n', xaxt='n', yaxt='n', ylim = c(1,2), xlim = c(1,2), ylab = '', xlab = '')
text(1.5,1.5,TeX('Effect of Mean-Displacement ($\\eta$) across SAP-SUP Interactions ($\\beta_4 > 0$)'), cex=1.4)
par(mar=c(3,3,2,1),mgp=c(1.5,0.5,0),tcl=-0.1)
par(cex.lab=1.2)
plot(100,100,
xlim =c(0.07,1.93),
ylim = c(-4.5, 0.8), #yaxt = 'n',
#cex = cex0_lr,
col='red',#col0_lr,
#pch = pch0_lr,
xlab = expression(eta),
ylab=y_axis_label,
main = 'Linear Regression')
idx <- which(df_percentile_beta4$Beta4_SAP_SUP==0)
polygon(c(df_percentile_beta4$displace_record[idx], rev(df_percentile_beta4$displace_record[idx])),
c(df_percentile_beta4$OLS_degradation.x[idx], rev(df_percentile_beta4$OLS_degradation.y[idx])),
#lty = "solid", lwd = 2,
border = NA,
col = col0)
abline(h=0, col=rgb(0,0,0,0.4),lty=5)
idx <- which(df_percentile_beta4$Beta4_SAP_SUP==0.5)
polygon(c(df_percentile_beta4$displace_record[idx], rev(df_percentile_beta4$displace_record[idx])),
c(df_percentile_beta4$OLS_degradation.x[idx], rev(df_percentile_beta4$OLS_degradation.y[idx])),
#lty = "solid", lwd = 2,
border = NA,
col = col1)
idx <- which(df_percentile_beta4$Beta4_SAP_SUP==1)
polygon(c(df_percentile_beta4$displace_record[idx], rev(df_percentile_beta4$displace_record[idx])),
c(df_percentile_beta4$OLS_degradation.x[idx], rev(df_percentile_beta4$OLS_degradation.y[idx])),
# lty = "solid", lwd = 2,
border = NA,
col = col2)
par(mar=c(3,1,2,1),mgp=c(1.5,0.5,0),tcl=-0.3)
par(cex.lab=1.2)
plot(100,100,
xlim =c(0.07,1.93),
ylim = c(-4.5, 0.8),yaxt = 'n',
cex = cex0,
col=col0, pch = pch0,
xlab = expression(eta),
ylab='',#'(Restricted-RMSE) - (Proposed-RMSE)',
#main = 'beta3=1, shift_sd=1')
main = 'Random Forest')#paste('RF: ', expression(beta[3]==5),', ', expression(sigma==1)))
idx <- which(df_percentile_beta4$Beta4_SAP_SUP==0)
polygon(c(df_percentile_beta4$displace_record[idx], rev(df_percentile_beta4$displace_record[idx])),
c(df_percentile_beta4$RF_degradation.x[idx], rev(df_percentile_beta4$RF_degradation.y[idx])),
#lty = "dashed", lwd = 2,
border = NA,
col = col0)
idx <- which(df_percentile_beta4$Beta4_SAP_SUP==0.5)
polygon(c(df_percentile_beta4$displace_record[idx], rev(df_percentile_beta4$displace_record[idx])),
c(df_percentile_beta4$RF_degradation.x[idx], rev(df_percentile_beta4$RF_degradation.y[idx])),
# lty = "dashed", lwd = 2,
border = NA,
col = col1)
idx <- which(df_percentile_beta4$Beta4_SAP_SUP==1)
polygon(c(df_percentile_beta4$displace_record[idx], rev(df_percentile_beta4$displace_record[idx])),
c(df_percentile_beta4$RF_degradation.x[idx], rev(df_percentile_beta4$RF_degradation.y[idx])),
#lty = "dashed", lwd = 2,
border = NA,
col = col2)
abline(h=0, col=rgb(0,0,0,0.4),lty=5)
text(1.7,0.1, expression(beta[4]==0.0), col=col0, cex = cex_size,adj = c(0,0))
text(1.7, -1.2, expression(beta[4]==0.5), col=col1, cex = cex_size,adj = c(0,0))
text(1.7, -2.4, expression(beta[4]==1.0), col=col2, cex = cex_size,adj = c(0,0))
dev.off()
getwd()
#pdf("../figs/3_SAP_SUP_interactions.pdf", height=3.8,width=7.6)
pdf("~/Dropbox/YelpBias/kristen_sandbox/final_paper_code/JITE_git_upload/Bias/code/b_PopeSydnor/1_MC_simulations/figs/3_SAP_SUP_interactions.pdf", height=4,width=8)
col0 = rgb(0,0,0,0.3)
col1 = rgb(0,0,0,0.5)
col2 = rgb(0,0,0,0.8)
layout(matrix(c(1,1,2,3), 2, 2, byrow = TRUE), widths = c(2,2), heights = c(0.2,1))
par(mar=c(0.5,3,0.5,1),mgp=c(1.5,0.5,0),tcl=-0.3)
plot(0,0, bty = 'n', xaxt='n', yaxt='n', ylim = c(1,2), xlim = c(1,2), ylab = '', xlab = '')
text(1.5,1.5,TeX('Effect of Mean-Displacement ($\\eta$) across SAP-SUP Interactions ($\\beta_4 > 0$)'), cex=1.4)
par(mar=c(3,3,2,1),mgp=c(1.5,0.5,0),tcl=-0.1)
par(cex.lab=1.2)
plot(100,100,
xlim =c(0.07,1.93),
ylim = c(-4.5, 0.8), #yaxt = 'n',
#cex = cex0_lr,
col='red',#col0_lr,
#pch = pch0_lr,
xlab = expression(eta),
ylab=y_axis_label,
main = 'Linear Regression')
idx <- which(df_percentile_beta4$Beta4_SAP_SUP==0)
polygon(c(df_percentile_beta4$displace_record[idx], rev(df_percentile_beta4$displace_record[idx])),
c(df_percentile_beta4$OLS_degradation.x[idx], rev(df_percentile_beta4$OLS_degradation.y[idx])),
#lty = "solid", lwd = 2,
border = NA,
col = col0)
abline(h=0, col=rgb(0,0,0,0.4),lty=5)
idx <- which(df_percentile_beta4$Beta4_SAP_SUP==0.5)
polygon(c(df_percentile_beta4$displace_record[idx], rev(df_percentile_beta4$displace_record[idx])),
c(df_percentile_beta4$OLS_degradation.x[idx], rev(df_percentile_beta4$OLS_degradation.y[idx])),
#lty = "solid", lwd = 2,
border = NA,
col = col1)
idx <- which(df_percentile_beta4$Beta4_SAP_SUP==1)
polygon(c(df_percentile_beta4$displace_record[idx], rev(df_percentile_beta4$displace_record[idx])),
c(df_percentile_beta4$OLS_degradation.x[idx], rev(df_percentile_beta4$OLS_degradation.y[idx])),
# lty = "solid", lwd = 2,
border = NA,
col = col2)
par(mar=c(3,1,2,1),mgp=c(1.5,0.5,0),tcl=-0.3)
par(cex.lab=1.2)
plot(100,100,
xlim =c(0.07,1.93),
ylim = c(-4.5, 0.8),yaxt = 'n',
cex = cex0,
col=col0, pch = pch0,
xlab = expression(eta),
ylab='',#'(Restricted-RMSE) - (Proposed-RMSE)',
#main = 'beta3=1, shift_sd=1')
main = 'Random Forest')#paste('RF: ', expression(beta[3]==5),', ', expression(sigma==1)))
idx <- which(df_percentile_beta4$Beta4_SAP_SUP==0)
polygon(c(df_percentile_beta4$displace_record[idx], rev(df_percentile_beta4$displace_record[idx])),
c(df_percentile_beta4$RF_degradation.x[idx], rev(df_percentile_beta4$RF_degradation.y[idx])),
#lty = "dashed", lwd = 2,
border = NA,
col = col0)
idx <- which(df_percentile_beta4$Beta4_SAP_SUP==0.5)
polygon(c(df_percentile_beta4$displace_record[idx], rev(df_percentile_beta4$displace_record[idx])),
c(df_percentile_beta4$RF_degradation.x[idx], rev(df_percentile_beta4$RF_degradation.y[idx])),
# lty = "dashed", lwd = 2,
border = NA,
col = col1)
idx <- which(df_percentile_beta4$Beta4_SAP_SUP==1)
polygon(c(df_percentile_beta4$displace_record[idx], rev(df_percentile_beta4$displace_record[idx])),
c(df_percentile_beta4$RF_degradation.x[idx], rev(df_percentile_beta4$RF_degradation.y[idx])),
#lty = "dashed", lwd = 2,
border = NA,
col = col2)
abline(h=0, col=rgb(0,0,0,0.4),lty=5)
text(1.7,0.1, expression(beta[4]==0.0), col=col0, cex = cex_size,adj = c(0,0))
text(1.7, -1.2, expression(beta[4]==0.5), col=col1, cex = cex_size,adj = c(0,0))
text(1.7, -2.4, expression(beta[4]==1.0), col=col2, cex = cex_size,adj = c(0,0))
dev.off()
setwd("./output/")
getwd()
setwd('/Users/kristen/Dropbox/YelpBias/kristen_sandbox/final_paper_code/simulation_epsilon_revised')
setwd("./output/")
getwd()
setwd('~/Dropbox/YelpBias/kristen_sandbox/final_paper_code/JITE_git_upload/Bias/code/b_PopeSydnor/2_KC_NY_analysis/')
rm(list=ls())
## King County
kang_df1 <- read.csv('./output/Kang_output_additional_Features_meanSUP_1.csv')
kang_df2 <- read.csv('./output/Kang_output_additional_Features_meanSUP_2.csv')
kang_df3 <- read.csv('./output/Kang_output_additional_Features_meanSUP_3.csv')
kang_df4 <- read.csv('./output/Kang_output_additional_Features_meanSUP_4.csv')
kang_df <- rbind(kang_df1, kang_df2, kang_df3, kang_df4)
## Predictive Degradation
kang_df$restricted_minus_proposed_TEST <- kang_df$Restricted_RF_RMSE_test - kang_df$Proposed_RF_RMSE_test
kang_df$restricted_minus_proposed_TEST_OLS <- kang_df$Restricted_OLS_RMSE_test - kang_df$Proposed_OLS_RMSE_test
## New York
ny_df1 <- read.csv('./output/NYC_output_all_years_additional_features_meanSUP_1.csv')
ny_df2 <- read.csv('./output/NYC_output_all_years_additional_features_meanSUP_2.csv')
ny_df3 <- read.csv('./output/NYC_output_all_years_additional_features_meanSUP_3.csv')
ny_df4 <- read.csv('./output/NYC_output_all_years_additional_features_meanSUP_4.csv')
ny_df <- rbind(ny_df1, ny_df2, ny_df3, ny_df4)
## Predictive Degradation
ny_df$restricted_minus_proposed_TEST <- ny_df$Restricted_RF_RMSE_test - ny_df$Proposed_RF_RMSE_test
ny_df$restricted_minus_proposed_TEST_OLS <- ny_df$Restricted_OLS_RMSE_test - ny_df$Proposed_OLS_RMSE_test
pdf("./figs/Kang_NY_Proposed_v_restricted.pdf", height=2.5,width=6)
layout(matrix(c(2,1,3,3), 2, 2, byrow = TRUE), widths = c(2,2), heights = c(1,0.25))
par(mar=c(1.2,3,1,1),mgp=c(1.5,0.5,0),tcl=-0.3)
hist(kang_df$restricted_minus_proposed_TEST, #pch = 16,
#xlim = c(1.804,1.835),
col = rgb(1,0,0,0.5),
breaks=seq(-0.088, 0.08, length.out=30),
#cex=1.5,
xaxt='n',
xlim = c(-0.09, 0.08),
xlab = '',
#ylab = '(restricted-RMSE - proposed-RMSE)',
freq = F, border = 'white',
main = 'King County')
abline(v=0,  lty=5)
axis(1, at=seq(-0.09, 0.08, by = 0.02),  lwd.ticks=1)
#axis(1, at=seq(0 , 2000, by=200), lwd=0, lwd.ticks=1)
#par(mar=c(3,3,1.5,1),mgp=c(1.5,0.5,0),tcl=-0.3)
par(mar=c(1.2,3,1,1),mgp=c(1.5,0.5,0),tcl=-0.3)
hist(ny_df$restricted_minus_proposed_TEST, #pch = 16,
#xlim = c(1.804,1.835),
col =rgb(0,0,1, 0.5),
breaks=seq(-0.03, 0.03, length.out=15),
#cex=1.5,
xlim = c(-0.09, 0.08),
xaxt = 'n',
# xlab = '',
xlab = '',##'Proposed Predictive Degradation',
freq = F, border = 'white', add =F,
main =  'NYC')
axis(1, at=seq(-0.09, 0.08, by = 0.02),  lwd.ticks=1)
abline(v=0,  lty=5)
plot(0,0, bty = 'n', xaxt='n', yaxt='n', ylim = c(1,2), xlim = c(1,2), ylab = '', xlab = '')
text(1.5,1.5,'Predictive Degradation', cex=1.1)
dev.off()
pdf("./figs/Kang_NY_Proposed_v_restricted_previous.pdf", height=4.4,width=5)
layout(matrix(c(1,2), 2, 1, byrow = TRUE), widths = c(1), heights = c(1,1.25))
par(mar=c(1.5,3,1,1),mgp=c(1.5,0.5,0),tcl=-0.3)
hist(kang_df$restricted_minus_proposed_TEST, #pch = 16,
#xlim = c(1.804,1.835),
col = rgb(1,0,0,0.5),
breaks=seq(-0.08, 0.08, length.out=30),
#cex=1.5,
xaxt='n',
xlim = c(-0.08, 0.08),
xlab = '',
#ylab = '(restricted-RMSE - proposed-RMSE)',
freq = F, border = 'white',
main = 'King County')
abline(v=0,  lty=5)
axis(1, at=seq(-0.08, 0.08, by = 0.02),  lwd.ticks=1)
#axis(1, at=seq(0 , 2000, by=200), lwd=0, lwd.ticks=1)
par(mar=c(3,3,1.5,1),mgp=c(1.5,0.5,0),tcl=-0.3)
hist(ny_df$restricted_minus_proposed_TEST, #pch = 16,
#xlim = c(1.804,1.835),
col =rgb(0,0,1, 0.5),
breaks=seq(-0.03, 0.03, length.out=15),
#cex=1.5,
xlim = c(-0.08, 0.08),
xaxt = 'n',
# xlab = '',
xlab = 'Proposed Predictive Degradation',
freq = F, border = 'white', add =F,
main =  'NYC')
axis(1, at=seq(-0.08, 0.08, by = 0.02),  lwd.ticks=1)
abline(v=0,  lty=5)
dev.off()
min(kang_df$restricted_minus_proposed_TEST)
max(kang_df$restricted_minus_proposed_TEST)
layout(matrix(c(1,2), 2, 1, byrow = TRUE), widths = c(1), heights = c(1,1.25))
par(mar=c(1.5,3,1,1),mgp=c(1.5,0.5,0),tcl=-0.3)
hist(kang_df$restricted_minus_proposed_TEST, #pch = 16,
col = rgb(1,0,0,0.5),
breaks=seq(-0.09, 0.08, length.out=30),
xaxt='n',
xlim = c(-0.09, 0.08),
xlab = '',
#ylab = '(restricted-RMSE - proposed-RMSE)',
freq = F, border = 'white',
main = 'King County')
abline(v=0,  lty=5)
axis(1, at=seq(-0.09, 0.08, by = 0.02),  lwd.ticks=1)
#axis(1, at=seq(0 , 2000, by=200), lwd=0, lwd.ticks=1)
par(mar=c(3,3,1.5,1),mgp=c(1.5,0.5,0),tcl=-0.3)
hist(ny_df$restricted_minus_proposed_TEST, #pch = 16,
col =rgb(0,0,1, 0.5),
breaks=seq(-0.03, 0.03, length.out=15),
#cex=1.5,
xlim = c(-0.09, 0.08),
xaxt = 'n',
# xlab = '',
xlab = 'Proposed Predictive Degradation',
freq = F, border = 'white', add =F,
main =  'NYC')
axis(1, at=seq(-0.09, 0.08, by = 0.02),  lwd.ticks=1)
abline(v=0,  lty=5)
pdf("./figs/Kang_NY_RF_v_OLS.pdf", height=5,width=5)
cex_pt <- 0.5
par(mfrow=c(2,2),mar=c(3,3,2,1),mgp=c(1.5,0.5,0),tcl=-0.3)
plot(kang_df$Proposed_OLS_RMSE_test ,
kang_df$Proposed_RF_RMSE_test ,
xlab = 'Linear',
ylab = 'RF',
main = 'Proposed (King County)',
pch = 20, cex = cex_pt,
col=rgb(0,0,0,0.4),
xlim = c(13.25,15.5),
ylim = c(13.25,15.5))
abline(a=0,b=1)
par(mar=c(3,2.5,2,1),mgp=c(1.5,0.5,0),tcl=-0.3)
plot(kang_df$Restricted_OLS_RMSE_test ,
kang_df$Restricted_RF_RMSE_test ,
xlab = 'Linear',
ylab = 'RF',
cex = cex_pt,
main = 'Restricted (King County)',
pch =  20,
col=rgb(0,0,0,0.4),
xlim = c(13.25,15.5),
ylim = c(13.25,15.5))
abline(a=0,b=1)
## NYC
par(mar=c(3,3,2,1),mgp=c(1.5,0.5,0),tcl=-0.3)
plot(ny_df$Proposed_OLS_RMSE_test ,
ny_df$Proposed_RF_RMSE_test ,
xlab = 'Linear',
ylab = 'RF',
main = 'Proposed (NY)',
pch =  20,
cex = cex_pt,
col=rgb(0,0,0,0.4),
xlim = c(10.8,12.2),
ylim = c(10.8,12.2))
abline(a=0,b=1)
par(mar=c(3,2.5,2,1),mgp=c(1.5,0.5,0),tcl=-0.3)
plot(ny_df$Restricted_OLS_RMSE_test ,
ny_df$Restricted_RF_RMSE_test ,
xlab = 'Linear',
ylab = 'RF',
main = 'Restricted (NY)',
cex = cex_pt,
pch =  20,
col=rgb(0,0,0,0.4),
xlim = c(10.8,12.2),
ylim = c(10.8,12.2))
abline(a=0,b=1)
dev.off()
cex_pt <- 0.5
par(mfrow=c(2,2),mar=c(3,3,1,2),mgp=c(1.5,0.5,0),tcl=-0.3)
plot(kang_df$Proposed_OLS_RMSE_test ,
kang_df$Proposed_RF_RMSE_test ,
xlab = 'Linear',
ylab = 'RF',
main = 'Proposed (King County)',
pch = 20, cex = cex_pt,
col=rgb(0,0,0,0.4),
xlim = c(13.25,15.5),
ylim = c(13.25,15.5))
abline(a=0,b=1)
par(mar=c(3,2.5,2,1),mgp=c(1.5,0.5,0),tcl=-0.3)
plot(kang_df$Restricted_OLS_RMSE_test ,
kang_df$Restricted_RF_RMSE_test ,
xlab = 'Linear',
ylab = 'RF',
cex = cex_pt,
main = 'Restricted (King County)',
pch =  20,
col=rgb(0,0,0,0.4),
xlim = c(13.25,15.5),
ylim = c(13.25,15.5))
abline(a=0,b=1)
## NYC
par(mar=c(3,3,2,1),mgp=c(1.5,0.5,0),tcl=-0.3)
plot(ny_df$Proposed_OLS_RMSE_test ,
ny_df$Proposed_RF_RMSE_test ,
xlab = 'Linear',
ylab = 'RF',
main = 'Proposed (New York)',
pch =  20,
cex = cex_pt,
col=rgb(0,0,0,0.4),
xlim = c(10.8,12.2),
ylim = c(10.8,12.2))
abline(a=0,b=1)
par(mar=c(3,2.5,2,1),mgp=c(1.5,0.5,0),tcl=-0.3)
plot(ny_df$Restricted_OLS_RMSE_test ,
ny_df$Restricted_RF_RMSE_test ,
xlab = 'Linear',
ylab = 'RF',
main = 'Restricted (New York)',
cex = cex_pt,
pch =  20,
col=rgb(0,0,0,0.4),
xlim = c(10.8,12.2),
ylim = c(10.8,12.2))
abline(a=0,b=1)
pdf("./figs/Kang_NY_RF_v_OLS.pdf", height=5,width=5)
cex_pt <- 0.5
## NYC
par(mar=c(3,3,2,1),mgp=c(1.5,0.5,0),tcl=-0.3)
plot(ny_df$Proposed_OLS_RMSE_test ,
ny_df$Proposed_RF_RMSE_test ,
xlab = 'Linear',
ylab = 'RF',
main = 'Proposed (New York)',
pch =  20,
cex = cex_pt,
col=rgb(0,0,0,0.4),
xlim = c(10.8,12.2),
ylim = c(10.8,12.2))
abline(a=0,b=1)
par(mar=c(3,2.5,2,1),mgp=c(1.5,0.5,0),tcl=-0.3)
plot(ny_df$Restricted_OLS_RMSE_test ,
ny_df$Restricted_RF_RMSE_test ,
xlab = 'Linear',
ylab = 'RF',
main = 'Restricted (New York)',
cex = cex_pt,
pch =  20,
col=rgb(0,0,0,0.4),
xlim = c(10.8,12.2),
ylim = c(10.8,12.2))
abline(a=0,b=1)
par(mfrow=c(2,2),mar=c(3,3,2,1),mgp=c(1.5,0.5,0),tcl=-0.3)
plot(kang_df$Proposed_OLS_RMSE_test ,
kang_df$Proposed_RF_RMSE_test ,
xlab = 'Linear',
ylab = 'RF',
main = 'Proposed (King County)',
pch = 20, cex = cex_pt,
col=rgb(0,0,0,0.4),
xlim = c(13.25,15.5),
ylim = c(13.25,15.5))
abline(a=0,b=1)
par(mar=c(3,2.5,2,1),mgp=c(1.5,0.5,0),tcl=-0.3)
plot(kang_df$Restricted_OLS_RMSE_test ,
kang_df$Restricted_RF_RMSE_test ,
xlab = 'Linear',
ylab = 'RF',
cex = cex_pt,
main = 'Restricted (King County)',
pch =  20,
col=rgb(0,0,0,0.4),
xlim = c(13.25,15.5),
ylim = c(13.25,15.5))
abline(a=0,b=1)
dev.off()
pdf("./figs/Kang_NY_RF_v_OLS.pdf", height=5,width=5)
cex_pt <- 0.5
par(mfrow=c(2,2),mar=c(3,3,2,1),mgp=c(1.5,0.5,0),tcl=-0.3)
## NYC
par(mar=c(3,3,2,1),mgp=c(1.5,0.5,0),tcl=-0.3)
plot(ny_df$Proposed_OLS_RMSE_test ,
ny_df$Proposed_RF_RMSE_test ,
xlab = 'Linear',
ylab = 'RF',
main = 'Proposed (New York)',
pch =  20,
cex = cex_pt,
col=rgb(0,0,0,0.4),
xlim = c(10.8,12.2),
ylim = c(10.8,12.2))
abline(a=0,b=1)
par(mar=c(3,2.5,2,1),mgp=c(1.5,0.5,0),tcl=-0.3)
plot(ny_df$Restricted_OLS_RMSE_test ,
ny_df$Restricted_RF_RMSE_test ,
xlab = 'Linear',
ylab = 'RF',
main = 'Restricted (New York)',
cex = cex_pt,
pch =  20,
col=rgb(0,0,0,0.4),
xlim = c(10.8,12.2),
ylim = c(10.8,12.2))
abline(a=0,b=1)
plot(kang_df$Proposed_OLS_RMSE_test ,
kang_df$Proposed_RF_RMSE_test ,
xlab = 'Linear',
ylab = 'RF',
main = 'Proposed (King County)',
pch = 20, cex = cex_pt,
col=rgb(0,0,0,0.4),
xlim = c(13.25,15.5),
ylim = c(13.25,15.5))
abline(a=0,b=1)
par(mar=c(3,2.5,2,1),mgp=c(1.5,0.5,0),tcl=-0.3)
plot(kang_df$Restricted_OLS_RMSE_test ,
kang_df$Restricted_RF_RMSE_test ,
xlab = 'Linear',
ylab = 'RF',
cex = cex_pt,
main = 'Restricted (King County)',
pch =  20,
col=rgb(0,0,0,0.4),
xlim = c(13.25,15.5),
ylim = c(13.25,15.5))
abline(a=0,b=1)
dev.off()
rm(list = ls())
# fit full model w/ and w/o Yelp-terms and/or complaints and compare relative decrease in RMSE
setwd('~/Dropbox/YelpBias/kristen_sandbox/final_paper_code/')
kang_df_rmse <- read.csv('./Kang/Kang_output_record_model_with_and_without_keywords.csv')
## compute relative % decrease in RMSE when adding CP to model
# for RF
mean(( kang_df_rmse$Full_RF_RMSE_test_without_CP - kang_df_rmse$Full_RF_RMSE_test )/ kang_df_rmse$Full_RF_RMSE_test)
#[1] -5.930334e-05
mean(( kang_df_rmse$Full_RF_RMSE_train_without_CP - kang_df_rmse$Full_RF_RMSE_train )/ kang_df_rmse$Full_RF_RMSE_train)
#[1] 0.001692531
# for OLS
mean(( kang_df_rmse$Full_OLS_RMSE_test_without_CP - kang_df_rmse$Full_OLS_RMSE_test )/ kang_df_rmse$Full_OLS_RMSE_test)
mean(( kang_df_rmse$Full_OLS_RMSE_train_without_CP - kang_df_rmse$Full_OLS_RMSE_train )/ kang_df_rmse$Full_OLS_RMSE_train)
ny_df_rmse <- read.csv('./NY/NYC_output_with_without_complaints.csv')
mean(( ny_df_rmse$Full_RF_RMSE_test_without_CP - ny_df_rmse$Full_RF_RMSE_test )/ ny_df_rmse$Full_RF_RMSE_test)
#[1] 0.0001899566
mean(( ny_df_rmse$Full_RF_RMSE_train_without_CP - ny_df_rmse$Full_RF_RMSE_train )/ ny_df_rmse$Full_RF_RMSE_train)
#[1] 0.001642343
getwd()
setwd('./JITE_git_upload/Bias/code/b_PopeSydnor/2_KC_NY_analysis/')
kang_df_rmse <- read.csv('./output/Kang_output_record_model_with_and_without_keywords.csv')
## compute relative % decrease in RMSE when adding CP to model
# for RF
mean(( kang_df_rmse$Full_RF_RMSE_test_without_CP - kang_df_rmse$Full_RF_RMSE_test )/ kang_df_rmse$Full_RF_RMSE_test)
#[1] -5.930334e-05
mean(( kang_df_rmse$Full_RF_RMSE_train_without_CP - kang_df_rmse$Full_RF_RMSE_train )/ kang_df_rmse$Full_RF_RMSE_train)
#[1] 0.001692531
# for OLS
mean(( kang_df_rmse$Full_OLS_RMSE_test_without_CP - kang_df_rmse$Full_OLS_RMSE_test )/ kang_df_rmse$Full_OLS_RMSE_test)
mean(( kang_df_rmse$Full_OLS_RMSE_train_without_CP - kang_df_rmse$Full_OLS_RMSE_train )/ kang_df_rmse$Full_OLS_RMSE_train)
ny_df_rmse <- read.csv('./output/NYC_output_with_without_complaints.csv')
mean(( ny_df_rmse$Full_RF_RMSE_test_without_CP - ny_df_rmse$Full_RF_RMSE_test )/ ny_df_rmse$Full_RF_RMSE_test)
#[1] 0.0001899566
mean(( ny_df_rmse$Full_RF_RMSE_train_without_CP - ny_df_rmse$Full_RF_RMSE_train )/ ny_df_rmse$Full_RF_RMSE_train)
#[1] 0.001642343
